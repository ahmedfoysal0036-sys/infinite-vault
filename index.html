<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professor | Civilization Core 2.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --glow: #00f2fe; --bg: #00080f; --red: #ff1a1a; 
            --success: #00ff88; --font: 'Orbitron', sans-serif;
            --mono: 'JetBrains Mono', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none !important; }
        body { background: var(--bg); height: 100vh; overflow: hidden; font-family: var(--font); color: var(--glow); transition: 0.5s; }
        
        #cursor { 
            position: fixed; width: 14px; height: 14px; background: var(--glow); 
            border-radius: 50%; pointer-events: none; z-index: 10000; 
            box-shadow: 0 0 15px var(--glow); transform: translate(-50%, -50%); 
        }

        #bg-canvas, #particle-canvas { position: fixed; top: 0; left: 0; z-index: 0; pointer-events: none; }
        
        /* Danger Theme Class */
        .danger-mode { background: #1a0000 !important; --glow: #ff1a1a; }

        #intro-layer, #main-ui { 
            position: absolute; width: 100%; height: 100vh; 
            display: flex; flex-direction: column; justify-content: center; 
            align-items: center; transition: 0.8s; 
        }

        #main-ui { display: none; opacity: 0; z-index: 20; padding: 20px; flex-direction: row; gap: 20px; }

        /* Login & Scanner */
        .login-box { text-align: center; z-index: 30; }
        .scanner-ring {
            width: 120px; height: 120px; border: 2px solid var(--glow); border-radius: 20px;
            margin: 0 auto 20px; position: relative; overflow: hidden; cursor: pointer;
        }
        .scanner-line {
            position: absolute; width: 100%; height: 4px; background: var(--glow);
            box-shadow: 0 0 15px var(--glow); top: 0; animation: scan 2s infinite linear;
        }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }

        /* Dashboard Layout */
        .vault-card { 
            background: rgba(0, 20, 40, 0.8); padding: 40px; border-radius: 25px; 
            border: 1px solid var(--glow); text-align: center; flex: 1;
            max-width: 500px; backdrop-filter: blur(20px); box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }

        /* Terminal Window */
        .terminal {
            flex: 1; max-width: 400px; height: 500px; background: rgba(0,0,0,0.9);
            border: 1px solid var(--glow); border-radius: 15px; font-family: var(--mono);
            font-size: 11px; padding: 15px; overflow-y: auto; color: var(--success);
            box-shadow: inset 0 0 20px rgba(0,255,136,0.1); display: none;
        }

        .input-glow { 
            width: 100%; padding: 15px; background: rgba(0,0,0,0.7); 
            border: 1px solid var(--glow); border-radius: 10px; color: #fff; 
            font-family: var(--font); text-align: center; outline: none; margin-bottom: 15px;
        }

        .execute-btn { 
            width: 100%; padding: 20px; background: var(--glow); border: none; 
            font-weight: 900; border-radius: 10px; color: #000; 
            transition: 0.3s; font-family: var(--font); letter-spacing: 2px;
        }
        .execute-btn:hover:not(:disabled) { transform: scale(1.02); background: #fff; box-shadow: 0 0 20px var(--glow); }
        .execute-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* Success/Error Grid */
        .integrity-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; margin: 15px 0; }
        .file-node { width: 10px; height: 10px; background: #222; border-radius: 2px; transition: 0.3s; }
        .file-node.done { background: var(--success); box-shadow: 0 0 5px var(--success); }
        .file-node.skip { background: var(--red); box-shadow: 0 0 5px var(--red); }

        .progress-circle-wrap { position: relative; width: 100px; height: 100px; margin: 0 auto 15px; display: none; }
        .circle-svg { transform: rotate(-90deg); width: 100px; height: 100px; }
        .circle-bg { fill: none; stroke: #111; stroke-width: 6; }
        .circle-bar { fill: none; stroke: var(--success); stroke-width: 6; stroke-dasharray: 283; stroke-dashoffset: 283; transition: 0.2s; }
        .counter-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 10px; }

        .terminate-container { margin-top: 20px; padding: 10px; border: 1px solid rgba(255,0,0,0.2); border-radius: 8px; }
    </style>
</head>
<body onclick="App.initAudio()">

    <div id="cursor"></div>
    <canvas id="bg-canvas"></canvas>
    <canvas id="particle-canvas"></canvas>

    <div id="intro-layer">
        <div class="login-box">
            <div class="scanner-ring" id="scanner" onclick="App.speak('Biometric required')">
                <div class="scanner-line"></div>
            </div>
            <h2 id="greet-msg" style="margin-bottom:20px; font-size: 14px; letter-spacing:3px;">IDENTITY VERIFICATION</h2>
            <input type="password" id="boot-pass" class="input-glow" placeholder="ACCESS KEY">
            <button class="execute-btn" style="width:150px; padding:12px;" onclick="App.boot()">VERIFY</button>
        </div>
    </div>

    <div id="main-ui">
        <div class="vault-card">
            <h1 id="title" style="font-size:20px; margin-bottom:5px;">CIVILIZATION CORE</h1>
            <p id="msg" style="font-size:10px; margin-bottom:20px; color:#aaa; letter-spacing:1px;">SECURE NODE: 8801857974447</p>
            
            <input type="file" id="files" class="input-glow" multiple onchange="App.prepNodes()">

            <div class="integrity-grid" id="node-grid"></div>

            <div class="progress-circle-wrap" id="p-circle">
                <svg class="circle-svg">
                    <circle class="circle-bg" cx="50" cy="50" r="45"></circle>
                    <circle id="circle-proc" class="circle-bar" cx="50" cy="50" r="45"></circle>
                </svg>
                <div class="counter-text" id="count-ui">0/0</div>
            </div>

            <button id="up-btn" class="execute-btn" onclick="App.upload()">INITIATE SYNC</button>
            
            <div class="terminate-container">
                <button style="background:none; border:none; color:var(--red); font-family:var(--font); font-size:9px; cursor:pointer;" onclick="location.reload()">ABORT PROTOCOL</button>
            </div>
        </div>

        <div class="terminal" id="term"></div>
    </div>

    <script>
        const App = {
            T: '8582534427:AAHq4TfwFqBIy1wU9mp6bDNQGSeSD49yX94',
            C: '682844989',
            P: '787898',
            audioStarted: false,
            particles: [],

            init() {
                const cvs = document.getElementById('bg-canvas');
                const pCvs = document.getElementById('particle-canvas');
                const ctx = cvs.getContext('2d');
                const pCtx = pCvs.getContext('2d');
                
                window.onresize = () => {
                    cvs.width = pCvs.width = window.innerWidth;
                    cvs.height = pCvs.height = window.innerHeight;
                };
                window.onresize();

                this.stars = Array.from({length:50}, () => ({ x:Math.random()*cvs.width, y:Math.random()*cvs.height, s:Math.random()*2 }));
                
                const render = () => {
                    ctx.clearRect(0,0,cvs.width,cvs.height);
                    ctx.fillStyle = '#00f2fe44';
                    this.stars.forEach(s => { ctx.beginPath(); ctx.arc(s.x,s.y,s.s,0,Math.PI*2); ctx.fill(); });
                    
                    pCtx.clearRect(0,0,pCvs.width,pCvs.height);
                    if(this.particles.length < 30) this.particles.push({
                        x: Math.random()*pCvs.width, y: Math.random()*pCvs.height, 
                        r: Math.random()*2, s: Math.random()*1+0.5 
                    });
                    this.particles.forEach((p, i) => {
                        p.y -= p.s;
                        pCtx.beginPath(); pCtx.arc(p.x, p.y, p.r, 0, Math.PI*2);
                        pCtx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--glow');
                        pCtx.fill();
                        if(p.y < 0) this.particles.splice(i,1);
                    });
                    requestAnimationFrame(render);
                };
                render();
                document.addEventListener('mousemove', e => { 
                    document.getElementById('cursor').style.left = e.clientX+'px'; 
                    document.getElementById('cursor').style.top = e.clientY+'px'; 
                });
            },

            initAudio() { if(!this.audioStarted) { this.audioStarted = true; this.speak("System standing by"); } },

            speak(t) {
                window.speechSynthesis.cancel();
                const m = new SpeechSynthesisUtterance(t);
                m.rate = 1.1; m.pitch = 0.8;
                window.speechSynthesis.speak(m);
            },

            log(msg, type='info') {
                const t = document.getElementById('term');
                const line = document.createElement('div');
                line.style.color = type === 'err' ? 'var(--red)' : 'var(--success)';
                line.innerHTML = `> [${new Date().toLocaleTimeString()}] ${msg}`;
                t.appendChild(line);
                t.scrollTop = t.scrollHeight;
            },

            boot() {
                if(document.getElementById('boot-pass').value === this.P) {
                    this.speak("Welcome back, Professor. Access granted.");
                    document.getElementById('intro-layer').style.opacity = '0';
                    setTimeout(() => { 
                        document.getElementById('intro-layer').style.display = 'none';
                        document.getElementById('main-ui').style.display = 'flex';
                        document.getElementById('term').style.display = 'block';
                        setTimeout(() => document.getElementById('main-ui').style.opacity = '1', 50);
                        this.log("System Initialized...");
                        this.log("Nodes: Online");
                    }, 800);
                } else {
                    document.body.classList.add('danger-mode');
                    this.speak("Unauthorized access attempt. Alarm triggered.");
                    this.log("CRITICAL ERROR: AUTH_FAILED", 'err');
                    setTimeout(() => document.body.classList.remove('danger-mode'), 2000);
                }
            },

            prepNodes() {
                const count = document.getElementById('files').files.length;
                const grid = document.getElementById('node-grid');
                grid.innerHTML = '';
                for(let i=0; i<count; i++) grid.innerHTML += `<div class="file-node" id="node-${i}"></div>`;
                this.log(`${count} payloads queued for transmission.`);
            },

            async upload() {
                const files = document.getElementById('files').files;
                const btn = document.getElementById('up-btn');
                const circle = document.getElementById('circle-proc');
                const countUI = document.getElementById('count-ui');
                
                if(files.length === 0) return this.speak("No files detected");

                btn.disabled = true;
                document.getElementById('p-circle').style.display = 'block';
                this.log("Starting secure uplink...");

                for(let i=0; i<files.length; i++) {
                    countUI.innerText = `${i+1}/${files.length}`;
                    const node = document.getElementById(`node-${i}`);
                    
                    await new Promise(r => setTimeout(r, 100)); // Ultra-fast 100ms gap

                    try {
                        await new Promise((resolve, reject) => {
                            const xhr = new XMLHttpRequest();
                            const fd = new FormData();
                            fd.append('chat_id', this.C);
                            fd.append('document', files[i]);

                            xhr.upload.onprogress = e => {
                                if (e.lengthComputable) {
                                    const percent = (e.loaded / e.total) * 100;
                                    circle.style.strokeDashoffset = 283 - (283 * percent / 100);
                                }
                            };

                            xhr.onreadystatechange = () => {
                                if (xhr.readyState === 4) {
                                    if (xhr.status === 200) {
                                        this.log(`Syncing: ${files[i].name}... OK`);
                                        node.classList.add('done');
                                        resolve();
                                    } else {
                                        reject("Status " + xhr.status);
                                    }
                                }
                            };
                            xhr.onerror = () => reject("Network failure");
                            xhr.open('POST', `https://api.telegram.org/bot${this.T}/sendDocument`, true);
                            xhr.send(fd);
                        });
                    } catch(e) {
                        this.log(`Warning: Payload ${i+1} Corrupted. Skipping...`, 'err');
                        node.classList.add('skip');
                        document.body.classList.add('danger-mode');
                        setTimeout(() => document.body.classList.remove('danger-mode'), 300);
                        continue;
                    }
                }

                this.speak("Transmission complete. All nodes synchronized.");
                this.log("Protocol Finish. System Secure.");
                btn.disabled = false;
            }
        };

        window.onload = () => App.init();
    </script>
</body>
</html>
